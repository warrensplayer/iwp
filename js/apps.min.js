/************************************************************
 * InfiniteWP Admin panel									*
 * Copyright (c) 2012 Revmakx								*
 * www.revmakx.com											*
 *															*
 ************************************************************/
function echeck(e){var t="@";var n=".";var r=e.indexOf(t);var i=e.length;var s=e.indexOf(n);if(e.indexOf(t)==-1){return false}if(e.indexOf(t)==-1||e.indexOf(t)==0||e.indexOf(t)==i){return false}if(e.indexOf(n)==-1||e.indexOf(n)==0||e.indexOf(n)==i){return false}if(e.indexOf(t,r+1)!=-1){return false}if(e.substring(r-1,r)==n||e.substring(r+1,r+2)==n){return false}if(e.indexOf(n,r+2)==-1){return false}if(e.indexOf(" ")!=-1){return false}return true}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function getPropertyCount(e){var t=0,n;for(n in e){if(e.hasOwnProperty(n)){t++}}return t}function addNumber(e,t){if($(".dialog_cont #backupTotal").val()==""||$(".dialog_cont #backupTotal").val()=="0")$(".dialog_cont #backupTotal").val("1");if($(e).hasClass("incr"))type=1;else if($(e).hasClass("decr"))type=0;val=$("#"+t).val();if(type==0&&val!=1&&val!=0){$("#"+t).val(parseInt(val)-1)}else if(type==1)$("#"+t).val(parseInt(val)+1)}function centerDialog(){$("#modalDiv").dialog({width:"auto",modal:true,position:"center",resizable:false})}function bottomToolBarShow(){dynamicResize()}function bottomToolBarHide(){$("#bottom_sites_cont").hide();$(".showFooterSelector").removeClass("pressed");$("#dynamic_resize").css("margin-left","0")}function dynamicResize(e){if(e==undefined)e=0;if($('[role="dialog"]').is(":visible")&&e==0)return false;var t=$(window).height();var n=$(window).width();var r=Math.round(n/2);if(n<1400){$(".social_love").hide()}else $(".social_love").show();if(n>=1250){bottomFullBar=1;$("#dynamic_resize").css({"margin-left":"260px"});$("#bottom_toolbar #bottom_sites_cont").height(t-32).css("margin-top","-"+(t-35)+"px").show();$("#bottom_toolbar #bottom_sites_cont #bottom_left,#bottom_toolbar #bottom_sites_cont #bottom_right").height(t-34);$("#bottom_toolbar #bottom_sites_cont .list_cont").height(t-112);$("#bottomToolBarSelector .bg_yellow").removeClass("bg_yellow");$(".showFooterSelector").addClass("pressed");var i=parseInt(r)+parseInt(130);$("#loadingDiv").css("left",i)}else{bottomFullBar=0;$("#dynamic_resize").css({"margin-left":"0"});$("#bottom_toolbar #bottom_sites_cont").height(401).css("margin-top","-400px").show();$("#bottom_toolbar #bottom_sites_cont #bottom_left,#bottom_toolbar #bottom_sites_cont #bottom_right").height(401);$("#bottom_toolbar #bottom_sites_cont .list_cont").height(324);$("#loadingDiv").css("left",r)}}function closeDialogs(e,t){if($("#ui-tooltip-manageGroupsQtip").length>0)$(".toggle_manage_groups").qtip("destroy");if(groupEditFlag!=1&&bottomFullBar!=1){$("#bottom_sites_cont").hide();resetBottomToolbar()}$("#historyQueue").hide();if($("#settings_cont").is(":visible")&&e!=2){$("#settings_btn").removeClass("active");$("#settings_cont").hide()}if($("#updates_centre_cont").is(":visible")&&stopAllAction!=true&&e!=1){$("#updateCentreBtn").removeClass("active");$("#updates_centre_cont").hide()}if(scheduleAddonFlag==1)$(".dialog_cont .time_select_options").hide();$(".dropdownToggle").hide();$(".dropdown_btn").removeClass("open")}function loadFixedNotifications(){if(fixedNotifications!=null&&fixedNotifications!=undefined&&getPropertyCount(fixedNotifications)>0){$.each(fixedNotifications,function(e,t){$(".notification_cont").append('<div class="notification '+t.type.toLowerCase()+'"><div class="notif_title">'+t.title+'</div><div class="notif_body">'+t.message+'</div><div class="n_close"></div></div>')})}}function checkUpdateEmpty(){if($("#siteViewUpdateContent .ind_row_cont").not(".hide,.hideVar").length<1&&$("#siteViewUpdateContent .empty_data_set").not(".hiddenCheck").css("display")=="none")$("#siteViewUpdateContent .hiddenCheck").show();if($("#themeViewUpdateContent .ind_row_cont").not(".hide,.hideVar").length<1&&$("#themeViewUpdateContent .empty_data_set").not(".hiddenCheck").css("display")=="none")$("#themeViewUpdateContent .hiddenCheck").show();if($("#pluginViewUpdateContent .ind_row_cont").not(".hide,.hideVar").length<1&&$("#pluginViewUpdateContent .empty_data_set").not(".hiddenCheck").css("display")=="none")$("#pluginViewUpdateContent .hiddenCheck").show();if($("#WPViewUpdateContent .ind_row_cont").not(".hide,.hideVar").length<1&&$("#WPViewUpdateContent .empty_data_set").not(".hiddenCheck").css("display")=="none"){$("#WPViewUpdateContent .hiddenCheck").show()}}function siteSelectorNanoReset(e){if($.browser.msie&&$.browser.version=="8.0"){$(".site_selector1 .bywebsites .website_items_cont .website_cont:nth-child(3n+3)").css({width:"235px","border-right":"0"})}$(".siteSelectorContainer .nano").nanoScroller({stop:true});$(".siteSelectorContainer .group_items_cont").css("height",$(".siteSelectorContainer .group_items_cont").height()).addClass("nano");$(".siteSelectorContainer .website_items_cont").css("height",$(".siteSelectorContainer .website_items_cont").height()).addClass("nano");$(".siteSelectorContainer .nano").nanoScroller();if(e==1){$("#bottomToolBarSelector .nano").nanoScroller({stop:true});$("#bottomToolBarSelector .nano").nanoScroller()}}function applyChangesCheck(){if($(".actionButton").hasClass("active"))$(".status_applyChangesCheck").removeClass("disabled");else $(".status_applyChangesCheck").addClass("disabled")}function historyRefresh(){var e={};e["requiredData"]={};e["requiredData"]["getHistoryPanelHTML"]=1;doCall(ajaxCallPath,e,"reloadHistory","json","noProgress",1)}function setTooltipData(e){toolTipData=e.data.getUserHelp;if(toolTipData.manageGroups=="true")$(".toggle_manage_groups").qtip({id:"toggleGroupQtip",content:{text:"Manage Groups"},position:{my:"bottom center",at:"top center",adjust:{y:-6}},show:{event:"mouseenter"},hide:{event:"mouseleave"},style:{classes:"ui-tooltip-shadow ui-tooltip-dark",tip:{corner:true,width:10,height:5}}})}function getTotalUpdates(e){var t=e.pluginsView.plugins;var n=e.themesView.themes;var r=mainJson.coreView.core;if(r!=undefined)var i=getPropertyCount(r);else var i=0;if(t!=undefined)var s=getPropertyCount(t);else var s=0;if(n!=undefined)var o=getPropertyCount(n);else var o=0;var u=i+s+o;return u}function resetBottomToolbar(){if(bottomFullBar!=1){$(".showFooterSelector").removeClass("pressed");$("#bottom_sites_cont").hide()}$("#bottomToolBarSelector .bg_yellow").removeClass("bg_yellow");$("#bottomToolbarOptions").remove()}function processRemoveSite(e){var t=e.actionResult.detailedStatus[0];$("#modalDiv .btn_loadingDiv").remove();if(t.status!="success"){var n='Site removed from the panel.<br>However following error occured:<span class="error_txt"> '+t.errorMsg+"</span>";var r='<span class="successMsg"><span class="success_icon"></span>'+n+"</span>";$("#removeSiteCont").html(r);$("#removeSiteButtons").hide()}else setTimeout(function(){$("#modalDiv").dialog("close")},1e3);resetVars(e);refreshStats(e,1)}function processEditSite(e){$(".addSiteButton").removeClass("disabled");$("#modalDiv .btn_loadingDiv").remove();if(e.data.updateSite==false){var t='<span id="addSiteErrorMsg"><span class="fail_icon"></span>'+errorMsg+"</span>";$("#addSiteSprite").after(t)}else{$(".add_site.form_cont").html('<span id="addSiteSuccessMsg"><span class="success_icon"></span>Site successfully edited.</span>');$(".addSiteButton").hide();setTimeout(function(){$("#modalDiv").dialog("close")},2e3);resetVars(e);refreshStats(e,1)}}function processAddSite(e){$(".addSiteButton").removeClass("disabled");$("#modalDiv .btn_loadingDiv").remove();var t=e.actionResult.detailedStatus[0];if(t.status!="success"){if(t.error=="main_plugin_connection_error"){var n=$("#websiteURL").val();n=n.Trim();if(n.charAt(n.length-1)!="/")n=n+"/";var r=n+"wp-admin/plugin-install.php?tab=search&type=term&s=InfiniteWP&plugin-search-input=Search+Plugins";var i='Yikes! It appears IWP plugin has not been installed in this site. Click here to <a href="'+r+'" target="_blank">Install</a> it.<br>OR<br>If you have already installed IWP Plugin, deactivate and activate it now.'}else var i=t.errorMsg;if(t.error=="404"||t.error=="402"||t.error=="403")i+='<br><a href="http://infinitewp.com/knowledge-base/402-403-404-error-while-adding-site/" target="_blank">Try this possible solution</a>';var s='<span id="addSiteErrorMsg"><span class="fail_icon"></span>'+i+"</span>";$("#addSiteSprite").after(s)}else{$("#modalDiv").dialog("close");resetVars(e);refreshStats(e,1);$("#bottom_sites_cont").show();$(".showFooterSelector").addClass("pressed");var o=getLastKey(e.data.getSites);$("#bottomToolBarSelector #bottom_left .nano").nanoScroller({scroll:"bottom"});$("#bottomToolBarSelector #bottom_left .bottomSites#s"+o).effect("highlight",{},3e3)}}function updateCountRefresh(){$("#totalUpdateCount").text(mainJson.totalUpdateCount);$("#lastReloadTime").text(mainJson.lastReloadTime);if(typeof recentLength!="undefined"){$("#totalCommentCount").text(recentLength);if(recentLength<1){$(".commentCountClass").hide()}else{$(".commentCountClass").text(recentLength).show()}}}function processClientUpdate(e){clientUpdateSites=e;var t='<div class="dialog_cont update_client_plugin"> <div class="th rep_sprite"> <div class="title droid700">IMPORTANT UPDATE</div> <a class="cancel rep_sprite_backup notNowUpdate">cancel</a></div> <div style="padding:20px;"><div style="text-align:center;line-height: 20px;" >An important update to the <span class="droid700">IWP Client Plugin</span> is available.<div>We <span class="droid700">highly recommend</span> that you update it on all your sites.</div></div></div> <div class="clear-both"></div> <div class="th_sub rep_sprite" style="border-top:1px solid #c6c9ca;"><div class="btn_action float-right"><a class="rep_sprite" id="updateClientConfirm">Update Now</a></div> <span class="float-right cancel notNowUpdate" >Not Now</span> </div> </div>';$("#modalDiv").dialog("destroy");$("#modalDiv").html(t).dialog({width:"auto",modal:true,position:"center",resizable:false,open:function(e,t){bottomToolBarHide()},close:function(e,t){bottomToolBarShow()}})}function formArrayRefreshStats(e){formArrayVar[e.actionResult.actionID]={};formArrayVar[e.actionResult.actionID]["function"]="refreshStats"}function formArrayLoadPlugins(e){formArrayVar[e.actionResult.actionID]={};formArrayVar[e.actionResult.actionID]["function"]="loadPlugins"}function refreshStats(e,t,n){if(t==undefined)t=0;$("#reloadStats").removeClass("disabled");$("#reloadStats").closest("div").removeClass("disabled");$(".btn_reload .btn_loadingDiv ").remove();$("#clearPluginCache").removeClass("active");mainJson=e.data.getSitesUpdates;sitesjson=mainJson.siteView;pluginsjson=mainJson.pluginsView.plugins;themesjson=mainJson.themesView.themes;wpjson=mainJson.coreView.core;if(typeof isComment!="undefined"&&isComment==1){if(e.data.manageCommentsGetRecent!=undefined){commentsJson=e;recentLength=commentsJson.data.manageCommentsGetRecent.siteView;if(recentLength!=undefined){recentLength=objLen(recentLength)}else{recentLength=0}}}if(typeof isGoogle!="undefined"){if(isGoogle==1){googleJson=e}}updateCountRefresh();if(n!=1)processPage(currentPage,1);if(e.data.getClientUpdateAvailableSiteIDs!=false&&notNowUpdate==false&&t==0){processClientUpdate(e.data.getClientUpdateAvailableSiteIDs)}if(typeof isComment!="undefined"){if($(".recentComments").hasClass("active")){loadCommentManage()}}}function validateZipURL(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(e.match(t))return true;else return false}function reloadHistory(e){var t=0;if(!$("#historyQueue").is(":visible"))t=1;$("#historyQueue .nano").nanoScroller({stop:true});if(e.data.getWaitData!=undefined&&getPropertyCount(e.data.getWaitData)>0&&formArrayVar!=undefined&&getPropertyCount(formArrayVar)>0){if(historyRefreshIntervalFlag==0){clearInterval(historyRefreshInterval);historyRefreshInterval=setInterval(function(){if(!$(".queue_detailed").is(":visible")){$("#historyQueueUpdateLoading").addClass("loading");historyRefresh()}},1e3);historyRefreshIntervalFlag=1}$.each(formArrayVar,function(n,r){if(e.data.getWaitData[n].total!=undefined){if(formArrayVar[n].initated==undefined){if(r["function"]=="loadUsers"){$(".loadUsersBtn").closest(".btn_action").hide().after('<div class="btn_reload_progress float-right" id="loadUsersProcess" style="margin: 8px 30px 8px 0px; width: 69px;"><span class="processCount">'+e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total+'</span> sites<div class="btn_stop_reload stopCall" actionid="'+n+'"><div class="tip">Stop reload & display loaded data</div></div></div>')}if(r["function"]=="loadPlugins"){$(".fetchInstall").closest(".btn_action").hide().after('<div class="btn_reload_progress float-right" id="loadPluginsProcess" style="margin: 8px 30px 8px 0px; width: 69px;"><span class="processCount">'+e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total+'</span> sites<div class="btn_stop_reload stopCall" actionid="'+n+'"><div class="tip">Stop reload & display loaded data</div></div></div>')}if(r["function"]=="loadComments"){$(".fetchManageComments").closest(".btn_action").hide().after('<div class="btn_reload_progress float-right" id="loadCommentsProcess" style="margin: 8px 30px 8px 0px; width: 89px;"><span class="processCount">'+e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total+'</span> sites<div class="btn_stop_reload stopCall" actionid="'+n+'"><div class="tip">Stop reload & display loaded data</div></div></div>')}if(r["function"]=="loadPosts"){$(".fetchPosts").closest(".btn_action").hide().after('<div class="btn_reload_progress float-left" id="loadPostsProcess" style="margin: 8px 30px 8px 0px; width: 64px;"><span class="processCount">'+e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total+'</span> sites<div class="btn_stop_reload stopCall" actionid="'+n+'"><div class="tip">Stop reload & display loaded data</div></div></div>')}if(r.function=="loadOptimize"){$(".loadOptimize").closest(".btn_action").hide().after('<div class="btn_reload_progress float-left" id="loadOptimizeProcess" style="margin: 8px 30px 8px 0px; width: 64px;"><span class="processCount">'+e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total+'</span> sites<div class="btn_stop_reload stopCall" actionid="'+n+'"><div class="tip">Stop reload & display loaded data</div></div></div>')}if(r["function"]=="loadLinks"){$(".fetchPosts").closest(".btn_action").hide().after('<div class="btn_reload_progress float-right" id="loadLinksProcess" style="margin: 8px 30px 8px 0px; width: 60px;"><span class="processCount">'+e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total+'</span> sites<div class="btn_stop_reload stopCall" actionid="'+n+'"><div class="tip">Stop reload & display loaded data</div></div></div>')}if(r["function"]=="refreshStats"){$("#reloadStats").closest(".btn_reload").hide().after('<div class="btn_reload_progress float-right" id="refreshStatsProcess"><span class="processCount">'+e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total+'</span> sites<div class="btn_stop_reload stopCall" actionid="'+n+'"><div class="tip">Stop reload & display loaded data</div></div></div>')}if(r["function"]=="runCode"){$("#runSnippetCode").closest(".btn_action").hide().after('<div class="btn_reload_progress float-right" id="runCodeProcess" style="margin: 8px 30px 8px 0px; width: 69px;"><span class="processCount">'+e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total+'</span> sites<div class="btn_stop_reload stopCall" actionid="'+n+'"><div class="tip">Stop reload & display loaded data</div></div></div>')}formArrayVar[n].initated=1}else{if(r["function"]=="refreshStats")$("#refreshStatsProcess .processCount").text(e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total);if(r["function"]=="loadPlugins")$("#loadPluginsProcess .processCount").text(e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total);if(r["function"]=="loadComments"){$("#loadCommentsProcess .processCount").text(e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total)}if(r.function=="loadOptimize"){$("#loadCommentsProcess .processCount").text(e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total)}if(r["function"]=="loadLinks"){$("#loadLinksProcess .processCount").text(e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total)}if(r["function"]=="loadPosts"){$("#loadPostsProcess .processCount").text(e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total)}if(r["function"]=="loadUsers")$("#loadUsersProcess .processCount").text(e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total);if(r["function"]=="runCode")$("#runCodeProcess .processCount").text(e.data.getWaitData[n].loaded+"/"+e.data.getWaitData[n].total)}}if(e.data.getWaitData[n].data!=undefined){if(r["function"]=="refreshStats"){$("#refreshStatsProcess").remove();$("#reloadStats").closest(".btn_reload").show();if(currentPage=="updates"||currentPage=="backups")refreshStats(e.data.getWaitData[n]);else refreshStats(e.data.getWaitData[n],"",1)}if(r["function"]=="loadPlugins"){$("#loadPluginsProcess").remove();$(".fetchInstall").closest(".btn_action").show();loadManagePanel(e.data.getWaitData[n])}if(r["function"]=="loadOptimize"){$("#loadOptimizeProcess").remove();$(".loadOptimize").closest(".btn_action").show();loadOptimizePanel(e.data.getWaitData[n])}if(r["function"]=="loadComments"){$("#loadCommentsProcess").remove();$(".fetchManageComments").closest(".btn_action").show();loadManageCommentPanel(e.data.getWaitData[n])}if(r["function"]=="loadPosts"){$("#loadPostsProcess").remove();$(".fetchPosts").closest(".btn_action").show();loadManagePostsPanel(e.data.getWaitData[n])}if(r["function"]=="loadLinks"){$("#loadLinksProcess").remove();$(".fetchPosts").closest(".btn_action").show();loadManagePostsPanel(e.data.getWaitData[n])}if(r["function"]=="loadUsers"){$("#loadUsersProcess").remove();$(".loadUsersBtn").closest(".btn_action").show();loadProcessedUserData(e.data.getWaitData[n])}if(r["function"]=="runCode"){$("#runCodeProcess").remove();$("#runSnippetCode").closest(".btn_action").show();processSnippetResponse(e.data.getWaitData[n])}delete formArrayVar[n];var i=e.data.getWaitData[n];if(i.actionResult.status!=undefined&&(i.actionResult.status=="partial"||i.actionResult.status=="error")){$("#historyQueue").show();t=0}}})}else{if(historyRefreshIntervalFlag==1){clearInterval(historyRefreshInterval);historyRefreshInterval=setInterval(function(){if(!$(".queue_detailed").is(":visible")){$("#historyQueueUpdateLoading").addClass("loading");historyRefresh()}},5e3);historyRefreshIntervalFlag=0}}$("#activityPopup").html(e.data.getHistoryPanelHTML);if(t==1)$("#historyQueue").hide();$("#historyQueue .nano").nanoScroller()}function reloadFavourites(e){favourites=e.data.getFavourites}function reloadFavouritesCustom(e){favourites=e.data.getFavourites;loadFavourites()}function createUploader(){var e=new qq.FileUploader({element:document.getElementById("uploaderContent"),action:systemURL+"uploadScript.php",debug:true})}function showBackupOptions(){$(".th_btm_info").remove();var e=isSiteSelected();if(!e)$("#enterBackupDetails").addClass("disabled clickNone");else{if(e>1)$("#enterBackupDetails").before('<div class="th_btm_info rep_sprite_backup">If the selected sites are on the same server, make sure it has enough resources to handle the backing up process.</div>');$("#enterBackupDetails").removeClass("disabled clickNone")}$("#modalDiv").dialog("option","position","center")}function showItemOptions(){if(!isSiteSelected()){$(".optionsContent").hide();$(".advancedInstallOptions").hide()}else{$(".optionsContent").show();$(".actionContent").html("");if($(".install").hasClass("active"))$(".advancedInstallOptions").show()}}function removeDeleteConf(){$(".del_conf").hide();$(".ind_groups","#bottom_sites_cont").removeClass("error")}function resetSelectors(){siteSelector();siteSelector(1);$("#bottomToolBarSelector").html(bottomToolbarVar);$(".siteSelectorContainer").html(siteSelectorRestrictVar);siteSelectorNanoReset(1);$(".select_group_toolbar").select2({width:"177px"});$(".toggle_manage_groups").qtip({id:"toggleGroupQtip",content:{text:"Manage Groups"},position:{my:"bottom center",at:"top center",adjust:{y:-6}},show:{event:"mouseenter"},hide:{event:"mouseleave"},style:{classes:"ui-tooltip-shadow ui-tooltip-dark",tip:{corner:true,width:10,height:5}}});resetGroup();dynamicResize()}function processCheckUpdate(e){$("#updates_centre_cont .btn_loadingDiv").remove();$(".updateActionBtn").removeClass("disabled");if(e.data.forceCheckUpdate==false){$(".is_uptodate").remove();$(".updatePanelData").append('<div class="is_uptodate rep_sprite_backup">InfiniteWP is up to date</div>')}else{loadPanelUpdate(e.data.forceCheckUpdate)}}function resetVars(e){e=e.data;site=e.getSites;sitesList=e.getSitesList;group=e.getGroupsSites;totalSites=getPropertyCount(site);totalGroups=getPropertyCount(group);totalUpdates=getPropertyCount(mainJson);resetSelectors()}function processSaveChange(e){if($("#toolbar_sites_cont","#bottomToolBarSelector").length>0&&$("#toolbar_sites_cont","#bottomToolBarSelector").is(":visible"))tempToolCont="<div id='toolbar_sites_cont'>"+$("#toolbar_sites_cont").html()+"</div>";else tempToolCont="";resetVars(e);groupCreateArray={};groupChangeArray={};groupNameArray={};groupDeleteArray={};$("#addWebsiteContainer","#bottomToolBarSelector").after(tempToolCont)}function processTestEmail(e){$("#sendTestEmail").removeClass("sending");if(e.data.updatesNotificationMailTest==true)$("#sendTestEmail").addClass("success");else $("#sendTestEmail").addClass("failure")}function processPage(e,t){currentPage=e;if(e=="items"){if(totalSites>0){loadItemManage();$(".typePlugin").removeClass("active");$(".typePlugin").click();$(".optionsContent").hide()}else{$("#pageContent").html('<div class="empty_data_set"> <div class="line1">Plugins & Themes of WordPress sites you add will appear here.</div> <div class="line2">You can install and manage plugins & themes here.</div> </div>')}}else if(e=="clientReporting"){if(totalSites>0){loadReportingMainPage()}else{$("#pageContent").html('<div class="empty_data_set"> <div class="line1">Wp OPtimization option from WordPress sites you add will appear here.</div> <div class="line2">You can perform Optimization here.</div> </div>')}}else if(e=="upTimeMonitor"){if(totalSites>0){loadupTimeMonitorMainPage()}else{$("#pageContent").html('<div class="empty_data_set"> <div class="line1">UpTimeMonitor options from WordPress sites you add will appear here.</div> <div class="line2">You can perform Optimization here.</div> </div>')}}else if(e=="malwareSecurity"){if(totalSites>0){loadMalwareSecurityMainPage()}else{$("#pageContent").html('<div class="empty_data_set"> <div class="line1">Malware Security option from WordPress sites you add will appear here.</div> <div class="line2">You can perform Optimization here.</div> </div>')}}else if(e=="wpOptimize"){if(totalSites>0){loadOptimizeMainPage();$(".optionsContent").hide()}else{$("#pageContent").html('<div class="empty_data_set"> <div class="line1">Wp OPtimization option from WordPress sites you add will appear here.</div> <div class="line2">You can perform Optimization here.</div> </div>')}}else if(e=="googleAnalytics"){if(totalSites>0){var n={};n["requiredData"]={};n["requiredData"]["googleAnalyticsActiveSites"]=1;doCall(ajaxCallPath,n,"loadGooglePage")}else{$("#pageContent").html('<div class="empty_data_set"> <div class="line1">Comments from WordPress sites you add will appear here.</div> <div class="line2">You can install and manage plugins & themes here.</div> </div>')}}else if(e=="comments"){if(totalSites>0){loadCommentManage();$(".optionsContent").hide()}else{$("#pageContent").html('<div class="empty_data_set"> <div class="line1">Comments from WordPress sites you add will appear here.</div> <div class="line2">You can install and manage plugins & themes here.</div> </div>')}}else if(e=="codeSnippets"){loadSnippetPage()}else if(e=="posts"){if(totalSites>0){$(".typePosts").removeClass("active");$(".typePosts").click();loadPostsManage();$(".optionsContent").hide()}else{$("#pageContent").html('<div class="empty_data_set"> <div class="line1">Posts and pages of WordPress sites you add will appear here.</div> <div class="line2">You can install and manage plugins & themes here.</div> </div>')}}else if(e=="updates"){if(totalSites>0){if(totalUpdates>0){loadUpdateContent();if(typeof isGoogle!="undefined"){if(isGoogle==1)loadGoogleContent()}parentFlag=0;$("#siteViewUpdateContent").html(displayUpdateContent("sites"));$("#WPViewUpdateContent").html('<div class="empty_data_set hiddenCheck" style="display:none"> <div class="line2">Hurray! All WordPress Installations are up-to-date.</div></div>'+displayUpdateContent("wp"));$("#themeViewUpdateContent").html('<div class="empty_data_set hiddenCheck" style="display:none"> <div class="line2">Hurray! All Themes are up-to-date.</div></div>'+displayUpdateContent("themes"));$("#pluginViewUpdateContent").html('<div class="empty_data_set hiddenCheck" style="display:none"> <div class="line2">Hurray! All Plugins are up-to-date.</div></div>'+displayUpdateContent("plugins"));currentUpdatePage="siteViewUpdateContent";$.each(updateCheckArray,function(e,t){checkGeneralSelect(e,"",1);$(".count span",".row_"+e).text($(".row_"+e+" .item_ind").not(".hidden").length)});$(function(){$(".websites_view").click();viewHiddenFlag=0;$("#mainUpdateCont .hideVar").hide();$("#mainUpdateCont .hidden").hide()})}else $("#pageContent").html('<div class="empty_data_set"> <div class="line1">Everything is up-to-date. Woooo!!</div> <div class="line2">You are smart & safe.</div> </div>')}else $("#pageContent").html('<div class="empty_data_set"> <div class="line1">Updates to your WP, Plugins & Themes will be listed out here.</div> <div class="line2">You can update them all at once or by items & can also hide all future updates for specific items.</div> </div>')}else if(e=="backups"){if(totalSites>0){var n={};n["requiredData"]={};n["requiredData"]["getSitesBackupsHTML"]=1;doCall(ajaxCallPath,n,"loadBackupPage")}else $("#pageContent").html('<div class="empty_data_set"> <div class="line1">Website backups you create will be listed here.</div> <div class="line2">You can restore, download and delete backups.</div> </div>')}else if(e=="history"){if(totalSites>0){var n={};n["requiredData"]={};n["requiredData"]["getHistoryPageHTML"]=1;doCall(ajaxCallPath,n,"loadHistoryPage")}else $("#pageContent").html('<div class="empty_data_set"> <div class="line1">All your site related activities will be logged here.</div></div>')}else if(e=="installClone"){installCloneLoad()}else if(e=="addons"){loadAddonsPage()}else if(e=="userManagement"){loadUserManagement()}}function processHideUpdate(e){mainJson=e.data.getSitesUpdates;sitesjson=mainJson.siteView;pluginsjson=mainJson.pluginsView.plugins;themesjson=mainJson.themesView.themes;wpjson=mainJson.coreView.core}function groupSelected(){var e=0;var t={};$(".js_addSite.active",".addSiteGroups").each(function(){t[e]=$(this).attr("gid");e=e+1});return t}function testAlert(e){}function getSelectedSites(e){var t={};if(e==undefined)e=".siteSelectorContainer";else e=e+" .siteSelectorContainer";var n=0;$(".website_cont.active",e).each(function(){t[n]=$(this).attr("sid");n++});return t}function installItems(e,t,n){if(t==undefined||t=="")dLink=$(e).attr("dlink");else dLink=t;var r={};r["args"]={};r["args"]["params"]={};r["args"]["siteIDs"]={};var i={};r["action"]="install"+activeItem.toTitleCase();i[activeItem]={};if(n>0){r["args"]["siteIDs"]=getSelectedSites();if(n==2)i[activeItem]=dLink;else i[activeItem][0]=dLink}else{r["args"]["siteIDs"][0]=$(e).attr("sid");i[activeItem][0]=dLink}if($(".activateItem").hasClass("active"))i["activate"]=true;if($(".overwriteItem").hasClass("active"))i["clearDestination"]=true;r["args"]["params"]=i;doHistoryCall(ajaxCallPath,r)}function processAppSettings(e){$("#saveSettingsBtn").removeClass("disabled");$("#settings_cont .btn_loadingDiv").remove();$("#saveSuccess").show();setTimeout(function(){$("#settings_cont").hide();$("#saveSuccess").hide()},1e3);$("#settings_btn").removeClass("active");loadSettingsPage(e)}function ajaxRepositoryCall(e){var t="";if(activeItem=="plugins"){t='<div class="th_sub rep_sprite" style="border-top:1px solid #D2D5D7;"> <div class="label" style="float:left;"><span style="margin-right:193px;">PLUGIN NAME</span></div> <div class="label" style="float:left;"><span style="margin-right:26px;">VERSION</span></div> <div class="label" style="float:left;"><span style="margin-right:28px;">RATING</span></div> <div class="label" style="float:left;"><span style="">DESCRIPTION</span></div> </div><div class="wp_repository_search_results">'}else t='<div class="wp_repository_search_results" style="border-top:1px solid #D2D5D7;"><div class="tr_theme">';t=t+e.data.getWPRepositoryHTML;if(activeItem=="plugins")t=t+"</div>";else t=t+'<div class="clear-both"></div></div></div>';$(".wp_repository_cont").html(t);$(".searchItem").removeClass("disabled");$(".installSubPanel .btn_loadingDiv").remove();if($(".searchCont").is(":visible")&&$(".searchVar.active").attr("dval")!="search")$(".searchCont").hide()}function installFavourites(){var e={};var t=0,n,r;$(".favItems.active a").each(function(){n=$(this).attr("dlink");r=$(this).attr("utype");e[t]=n;t++});installItems("",e,2)}function removeActiveElements(){$("#view_content .applyChangesCheck").each(function(){if($(this).hasClass("active"))$(this).closest("ul").before('<div class="queued_single">Queued..</div>').remove()})}function applyChanges(e){var t={};var n=0,r,i,s,o,u,a;closestVar=$(e).closest(".siteSearch");$(".applyChangesCheck.active").each(function(){if(!$(this).closest(".ind_row_cont").hasClass("hide")){r=$(this).attr("sid");i=$(this).attr("did");s=$(this).attr("utype");o=$(this).attr("action");u=$(this).attr("itemName");if(t[r]==undefined)t[r]={};if(t[r][s]==undefined)t[r][s]={};a={};a["name"]=u;a["path"]=i;a["action"]=o;if(activeItem=="themes")a["stylesheet"]=$(this).attr("stylesheet");t[r][s][n]=a;n++}});var f={};f["args"]={};f["args"]["params"]={};f["action"]="manage"+activeItem.toTitleCase();f["args"]["params"]=t;doHistoryCall(ajaxCallPath,f,"")}function isSiteSelected(e){var t=$(".website_cont.active",".siteSearch").length;if(t>0)return t;else return false}function triggerSettingsButton(){$("#saveSettingsBtn").removeClass("disabled")}function processSettingsForm(e){var t=e;e=e.data.updateAccountSettings;$("#saveSettingsBtn").removeClass("disabled");$("#settings_cont .btn_loadingDiv").remove();if(e.status=="error"&&e.error=="invalid_password"){var n=$("#currentPassword").closest(".valid_cont");$(".valid_error",n).show();$(".valid_error div",n).text("Invalid password. Kindly Check again.")}else{$("#saveSuccess").show();setTimeout(function(){$("#settings_cont").hide();$("#saveSuccess").hide()},1e3);$("#settings_btn").removeClass("active");loadSettingsPage(t)}}function validateSettingsForm(){var e=false,t;var n=$("#newPassword").val();var r=$("#newPasswordCheck").val();var i=$("#currentPassword").val();if(i==""||i=="Current Password"){t=$("#currentPassword").closest(".valid_cont");$(".valid_error",t).show();$(".valid_error div",t).text("Please enter a password.")}if(n==""||n=="New Password"){t=$("#newPassword").closest(".valid_cont");$(".valid_error",t).show();$(".valid_error div",t).text("Please enter a password.");e=true}else if(r==""||r=="New Password Again"){t=$("#newPasswordCheck").closest(".valid_cont");$(".valid_error",t).show();$(".valid_error div",t).text("Please re-enter your password.");e=true}else if(n!=r){t=$("#newPasswordCheck").closest(".valid_cont");$(".valid_error",t).show();$(".valid_error div",t).text("Passwords do not match.");e=true}return e}function processReport(e){$("#modalDiv .btn_loadingDiv").remove();if(e.data.sendReportIssue==true){$("#modalDiv .form_cont").html('<span id="addSiteSuccessMsg"><span class="success_icon"></span>The report has been sent.</span>');$("#sendReportBtn").hide();setTimeout(function(){$("#modalDiv").dialog("close")},2e3)}else{$("#modalDiv .form_cont").html('<span id="addSiteErrorMsg"><span class="fail_icon"></span>The report could not be sent. Try again or contact help@infinitewp.com</span></span>');$("#sendReportBtn").hide();setTimeout(function(){$("#modalDiv").dialog("close")},2e3)}}function doCall(url,data,callback,dataType,animationLoad,historyRefreshCheck){if(stopAllAction==false){if(data["requiredData"]==undefined)data["requiredData"]={};if(runOffBrowser==0){data["requiredData"]["runOffBrowserLoad"]=1;runOffBrowser=1}data["requiredData"]["getHistoryPanelHTML"]=1;if(historyRefreshCheck==1&&historyRefreshCheckFlag==0){historyRefreshCheckFlag=1}else if(historyRefreshCheck==1&&historyRefreshCheckFlag==1){return false}if(animationLoad!="noProgress")$("#process_queue").addClass("in_progress");if(animationLoad==undefined){var animationLoad="normal";var loaderDiv="#loadingDiv"}if(animationLoad=="normal")$(loaderDiv).show();if(dataType==undefined)dataType="json";$.ajax({traditional:true,type:"post",url:url,dataType:dataType,data:$.param(data),success:function(request){if(animationLoad=="normal")$(loaderDiv).hide();historyRefreshCheckFlag=0;if(request!=undefined&&request.logout!=undefined&&request.logout==true){window.location.href="login.php"}if(callback!=undefined)eval(callback+"(request)");if(dataType=="json"){reloadHistory(request)}if(updateAvailable==false&&request.updateAvailable!=undefined&&request.updateAvailable!=false){updateAvailable=request.updateAvailable;updateAvailableNotify=true;loadPanelUpdate(request.updateAvailable)}if(request!=undefined&&request.notifications!=undefined){fixedNotifications=request.notifications;loadFixedNotifications()}if(request.actionResult.status!=undefined&&(request.actionResult.status=="partial"||request.actionResult.status=="error"))$("#historyQueue").show()},error:function(){historyRefreshCheckFlag=0}})}}function processUpdateNow(e){var t='<iframe src="./update.php?action=appUpdate&newVersion='+e+'" height="170px" width="320px" border="0" ></iframe>';$(".updatePanelData").html(t)}function doHistoryCall(url,data,callback,dataType){if(stopAllAction==false){if(data["requiredData"]==undefined)data["requiredData"]={};data["requiredData"]["getHistoryPanelHTML"]=1;$("#process_queue").addClass("in_progress");$("#historyQueue").show();$(".queue_ind_item_cont .content").prepend('<div class="queue_ind_item historyItem">Adding to queue ...<div class="clear-both"></div></div>');if(dataType==undefined)dataType="json";$.ajax({traditional:true,type:"post",url:url,dataType:dataType,data:$.param(data),success:function(request){if(request.logout!=undefined&&request.logout==true){window.location.href="login.php"}if(dataType=="json"){reloadHistory(request)}if(callback!=undefined)eval(callback+"(request)");if(updateAvailable==false&&request.updateAvailable!=undefined&&request.updateAvailable!=false){updateAvailable=request.updateAvailable;updateAvailableNotify=true;loadPanelUpdate(request.updateAvailable)}if(request!=undefined&&request.notifications!=undefined){fixedNotifications=request.notifications;loadFixedNotifications()}}})}}function cancelEvent(e){e=e?e:window.event;if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault();e.cancelBubble=true;e.cancel=true;e.returnValue=false;return false}function getFirstKey(e,t){var n;$.each(e,function(e,r){if(t==2){$.each(r,function(e,t){n=t;return false})}else{n=e;return false}});return n}function getLastKey(e){$.each(e,function(e,t){tempVal=e});return tempVal}function makeHistorySelection(e,t){if(t==undefined)t="parent";$(".queue_detailed","."+t).hide();if(!$(e).hasClass("active")){$(".historyItem","."+t).removeClass("active");$(e).addClass("active");$("#historyQueue #"+$(e).attr("did")).nanoScroller({stop:true});$("#"+$(e).attr("did")).show();$("#historyQueue #"+$(e).attr("did")).nanoScroller()}else{$(e).removeClass("active");$("#"+$(e).attr("did")).hide()}}function siteSelector(e){var t="",n;var r="";var i="";var s="";var o="";var u="";if(group!=null&&group!=undefined&&getPropertyCount(group)>0){$.each(group,function(e,t){if(t.siteIDs!=undefined)n=t.siteIDs.length;else n=0;r=r+'<div class="group_cont rep_sprite" id="g'+e+'" gid="'+e+'" onclick=""><a title="'+t.name+'" >'+t.name+"</a></div>";o=o+'<div class="ind_groups" id="g'+e+'" gid="'+e+'" onclick=""><a title="'+t.name+'" onclick=""><span class="count_cont">'+n+'</span><input name="" type="text" value="'+t.name+'" class="groupEditText" /></a>   <div class="del_conf"><div class="label">Sure?</div><div class="yes deleteGroup">Yes</div><div class="no deleteGroup">No</div></div><div class="edit_del_cont"> <div class=" rep_sprite bg "><span class="rep_sprite_backup edit editGroup"></span></div> <div class=" rep_sprite bg"><span class=" rep_sprite_backup del deleteConf"></span></div> </div></div>'})}else{r="";o='<div class="empty_data_set websites"> <div class="line1" style="margin-top:200px;">Organize your WordPress sites into groups for easy managing.</div> <div class="line2">Go ahead. Create a group now.</div> <div class="arrow2"></div> </div>'}if(sitesList!=null&&sitesList!=undefined&&getPropertyCount(sitesList)>0){$.each(sitesList,function(t,n){if(n.network==1&&n.parent==0&&e==1){extraRestrictClass="disabled";extraTitle=" - Its a network subsite."}else{extraRestrictClass="";extraTitle=""}i=i+'<div class="website_cont searchable deselectGroups '+extraRestrictClass+'" id="s'+n.siteID+'"  sid="'+n.siteID+'" onclick=""><a title="'+n.name+extraTitle+'">'+n.name+"</a></div>";u=u+'<div class="ind_sites searchable js_sites bottomSites"  id="s'+n.siteID+'" sid="'+n.siteID+'" onclick=""><a title="'+n.name+'" class="site_selector_name"><span><img src="https://getfavicon.appspot.com/'+n.URL+'?defaulticon=https://www.google.com/s2/u/0/favicons?domain=www.wordpress.org" width="16" height="16"></span>'+n.name+"</a></div>"})}else{i="";u='<div class="empty_data_set websites"> <div class="line1">No websites added yet..</div> <div class="line2">That makes us sad. Come on.<br /> Lets add one of your WordPress sites.</div> <div class="add_site_arrow"></div> </div>'}t='<div class="site_selector1 shadow_stroke_box siteSearch"> <div class="bygroup"><div class="th rep_sprite"><div class="title">by <span class="droid700">Groups</span></div><div class="clear-both"></div></div>';t=t+'<div class="group_items_cont" ><div class="content"><div class="group_cont rep_sprite" id="g0" onclick=""><a>All Websites</a></div>';t=t+r+"</div></div></div>";t=t+'<div class="bywebsites"> <div class="th rep_sprite"> <div class="title">by <span class="droid700">Websites</span></div> <div class="type_filter"> <input name="" value="type to filter" type="text" class="input_type_filter search_site" ><div class="clear_input rep_sprite_backup"  onclick=""></div> </div> <div class="select_cont"><span>Select: </span><a class="siteSelectorSelect">All</a><a class="siteSelectorSelect">Invert</a><a class="siteSelectorSelect">None</a></div> <div class="clear-both"></div> </div> <div class="website_items_cont"><div class="content">';t=t+i+'<div class="no_match hiddenCont" style="display:none">Bummer, there are no websites that match.<br />Try typing lesser characters.</div> <div class="clear-both"></div> </div></div> <div class="clear-both"></div> </div><div class="clear-both"></div></div>';s='<div id="bottom_sites_cont" style="display:none"><div id="bottom_left" class="float-left"><div class="list_cont nano"><div class="content"><div class="no_match hiddenCont" style="display:none">Bummer, there are no websites that match.<br />Try typing lesser characters.</div>';s=s+u+' </div> </div> <div class="bottom_bar rep_sprite"> <div class="select_box_cont float-left" >'+groupGenerate(1,"bottom")+'</div> <div class="rep_sprite toggle_manage_groups float-right"><a class="rep_sprite_backup"></a></div> </div> <div class="bottom_subbar rep_sprite"><div style="position:relative;"><input name="" type="text" class="input_type_filter search_site" value="type to filter" ><div onclick="" class="clear_input rep_sprite_backup"></div></div> </div> </div> <div id="bottom_right" class="float-left"> <div class="list_cont nano"> <div class="content">';s=s+o+' </div> </div> <div class="bottom_bar rep_sprite"><div class="btn_action float-right "><a class="rep_sprite btn_blue" id="save_group_changes" style="display:none" onclick="">Save Changes</a></div></div> <div class="bottom_subbar rep_sprite" id="createGroupCont"> <input name="" type="text" class="input_type_filter  float-left onEnter groupClear" onenterbtn=".btn_create_group" id="newgroup" value="new group" > <div class="btn_create_group rep_sprite float-left user_select_no" >Create</div> </div> </div> </div> <div id="btn" class="showFooterSelector" onclick="">   </div><div class="site_bar_btn add_site rep_sprite float-left" style="margin-left: 54px;" id="addWebsiteContainer"><div class="btn_add_site rep_sprite_backup" id="addWebsite">Add Website</div></div>';bottomToolbarVar=s;if(e==1)siteSelectorRestrictVar=t;else siteSelectorVar=t}function updateSites(e,t){var n=0;var r={};var i={},s,o,u;$("span.statusSpan",e).text("Queued..");$("span.statusSpan",e).addClass("updating");$("span.typeVar",e).hide();if(t==1){var a="#"+currentUpdatePage;var f=$(e).attr("selector");$(".item_ind."+f+".active",a).not(".hide").not(".hidden").not(".updating").each(function(){if(!$(this).closest(".ind_row_cont").hasClass("hide")&&!$(this).closest(".ind_row_cont").hasClass("hidden")){$(".update_single",this).text("Queued..");$(".hideItem",this).hide();$(this).addClass("updating");$(this).removeClass("active");$(".row_checkbox",this).hide();s=$(this).attr("sid");o=$(this).attr("did");u=$(this).attr("utype");if(r[s]==undefined)r[s]={};if(r[s][u]==undefined)r[s][u]={};if(u=="core"){if(s!=undefined&&u!=undefined&&o!=undefined)r[s][u]=o}else{if(s!=undefined&&u!=undefined&&o!=undefined)r[s][u][n]=o}n++}})}else{var l=$(e).closest(".item_ind");$(l).addClass("updating");$(".update_single",l).text("Queued..");$(".hideItem",l).hide();$(l).removeClass("active");$(".row_checkbox",l).hide();s=$(l).attr("sid");o=$(l).attr("did");u=$(l).attr("utype");if(r[s]==undefined)r[s]={};if(r[s][u]==undefined)r[s][u]={};if(u=="core"){if(s!=undefined&&u!=undefined&&o!=undefined)r[s][u]=o}else{if(s!=undefined&&u!=undefined&&o!=undefined)r[s][u][0]=o}}var c=$(e).closest(".ind_row_cont");if($(".item_ind",c).not(".hidden").not(".hide").length==$(".item_ind.updating",c).not(".hidden").not(".hide").length){$(c).addClass("updating");$(".select_action,.select_action_long",c).hide()}checkUpdateSelect(e);$("span.statusSpan",e).removeClass("updating");i["action"]="updateAll";i["args"]={};i["args"]["params"]=r;doHistoryCall(ajaxCallPath,i,"")}function resetFilterText(e){$(".input_type_filter",e).val("").focus().blur();$(".hiddenCont, .clear_input",e).hide()}function filterByGroup(e,t,n){if(e==""||e==undefined)closestVar=$("#bottomToolBarSelector");else closestVar=$(e).closest(".siteSearch");$(".input_type_filter",closestVar).val("").focus().blur();$(".hiddenCont, .clear_input",closestVar).hide();if(t==0)$(".js_sites",closestVar).removeClass("hide");else{$(".js_sites",closestVar).removeClass("groupHide").addClass("hide").addClass("groupHide");if(getPropertyCount(group[t].siteIDs)>0){$.each(group[t].siteIDs,function(e,t){$('[sid="'+t+'"]',"#bottomToolBarSelector").removeClass("hide").removeClass("groupHide")})}}if(n==1)checkGeneralSelect("ind_row_cont")}function groupGenerate(e,t){var n="";if(e==2)var r="";if(e==1){var i="_toolbar"}else var i="";if(t==undefined)t=incrementRand;n='<select name="rand_'+t+'" class="select_group'+i+'" tabindex="2"><option value="0">All Websites</option>';$.each(group,function(t,i){if(e==2)r=r+'<div class="ind_group js_addSite g'+t+'" gid="'+t+'"><a>'+i.name+"</a></div>";n=n+'<option value="'+t+'">'+i.name+"</option>"});n=n+"</select>";incrementRand++;if(e==2){r='<div class="group_selector"><div class="content">'+r+'</div><div class="clear-both"></div> </div>';return r}else return n}function selectorBind(e,t){if($(e).attr("selector")!="ind_row_cont")selection(t,$(e).attr("selector"),e);else{mainUpdateSelection(t,e)}}function showOrHide(e,t,n,r){n="#"+n;if(r==1)resetGroup();if($(n).is(":visible")){$(n).hide();$(e).removeClass(t);if(toolTipData.manageGroups!="true"&&n=="#bottom_sites_cont")$(".toggle_manage_groups").qtip("destroy")}else{if(toolTipData.manageGroups!="true"&&n=="#bottom_sites_cont"){$(".toggle_manage_groups").qtip({events:{hide:function(e,t){tempArray={};tempArray["requiredData"]={};valArray={};valArray["manageGroups"]=true;tempArray["requiredData"]["updateUserhelp"]=valArray;tempArray["requiredData"]["getUserHelp"]=1;doCall(ajaxCallPath,tempArray,"setTooltipData")}},id:"manageGroupsQtip",content:{text:" ",title:{text:"Manage Groups",button:true}},position:{my:"bottom center",at:"top center",adjust:{y:-7}},show:{event:false,ready:true},hide:false,style:{classes:"ui-tooltip-shadow ui-tooltip-dark",tip:{corner:true,width:10,height:5}}})}$(n).show();$(e).addClass(t)}}function checkGroupName(e){var t=true;$.each(group,function(n,r){if(e.toLowerCase()==r.name.toLowerCase()){t=false;return false}});if(groupCreateArray!=undefined){$.each(groupCreateArray,function(n,r){if(r.toLowerCase()==e.toLowerCase()){t=false;return false}})}return t}function createGroup(){var e=$("#newgroup").val();if(checkGroupName(e)&&e!="new group"){$("#bottom_right > .list_cont > .content").animate({scrollTop:$("#bottom_right").height()},"slow");var t=e;var n='<div class="ind_groups" id="gnew-'+groupCounter+'" gid="new-'+groupCounter+'" newgroup="1" ><a><span class="count_cont">0</span><input name="" type="text" value="'+t+'" class="groupEditText" /></a><div class="del_conf" style="display: none; "><div class="label">Sure?</div><div class="yes deleteGroup">Yes</div><div class="no deleteGroup">No</div></div><div class="edit_del_cont"> <div class=" rep_sprite bg "><span class="rep_sprite_backup edit editGroup"></span></div> <div class=" rep_sprite bg"><span class=" rep_sprite_backup del deleteConf"></span></div> </div></div>';$("#newgroup").val("new group").css("color","rgb(170, 170, 170)");if($(".ind_groups","#bottomToolBarSelector").length==0){$("#bottom_right > .list_cont > .content").html(n);showGroupSelectBox()}else $("#bottom_right > .list_cont > .content").append(n);$("#gnew-"+groupCounter).click();groupCreateArray["new-"+groupCounter]=t;groupCounter++;$("#save_group_changes").show()}else if(e=="new group"||e=="")$("#createGroupCont").append("<div id='duplicateGroup'>Enter a group name.</div>");else{$("#createGroupCont").append("<div id='duplicateGroup'>Group already exists. Try somethin' else.</div>")}}function resetGroup(e){if(e==undefined)e=0;$("#bottom_toolbar #bottom_sites_cont .list_cont .ind_sites a").css({"background-position":"-25px 0",padding:"11px 0 9px 5px",width:"255px"});$("#bottom_right").hide();$("#bottom_toolbar #bottom_sites_cont .list_cont .ind_sites").removeClass("active");$(".ind_groups").removeClass("active");$(".select_group_toolbar").select2("enable");$(".toggle_manage_groups").removeClass("active");if(e==1){filterByGroup("",$(".select_group_toolbar").select2("val"))}groupEditFlag=0}function showGroupSelectBox(){if($.browser.msie&&$.browser.version=="8.0"){$("#bottom_toolbar #bottom_sites_cont .list_cont .ind_sites a").css({"background-position":"0 0","padding-left":"30px",width:"230px"})}else{$("#bottom_toolbar #bottom_sites_cont .list_cont .ind_sites a").animate({backgroundPosition:"0 0",paddingLeft:"30px",width:"230px"},300)}}function groupEdit(e){groupEditFlag=1;if($("#bottom_right").is(":visible")){resetGroup(1);$(e).removeClass("active")}else{$("#bottom_right").show();$(e).addClass("active");if($(".ind_groups","#bottomToolBarSelector").length>0){showGroupSelectBox();$(".select_group_toolbar").select2("disable");$(".js_sites","#bottomToolBarSelector").removeClass("hide");$(".ind_groups:first","#bottomToolBarSelector").click();$("#bottomToolBarSelector .nano").nanoScroller({stop:true});$("#bottomToolBarSelector .nano").nanoScroller()}}}function expandThis(e,t){var n=$(e).closest(".ind_row_cont");if(t=="summary"){$(".row_summary",n).hide();$(".row_detailed",n).show()}else{$(".row_summary",n).show();$(".row_detailed",n).hide()}}function optionSelect(e,t){var n=0;if(t==1&&$(e).hasClass("active")){$(e).removeClass("active")}else{ulClass=$(e).closest("ul");if(t==1){$(".optionSelectOne",ulClass).removeClass("active");if($(e).attr("action")=="activate"&&activeItem=="themes")$(".site"+$(e).attr("sid")).removeClass("active")}else $(".optionSelect",ulClass).removeClass("active");$(e).addClass("active")}}function checkFavItems(){var e="favItems";var t=$("."+e,".favSearch").length;var n=$("."+e+".active",".favSearch").length;if(n==0)$(".status_"+e).addClass("disabled");else $(".status_"+e).removeClass("disabled")}function checkUpdateSelect(e,t){var n=$(e).attr("parent");var r=$(e).attr("selector");if(r=="item_ind"){var i="#"+currentUpdatePage;$(e).addClass("disabled");$(".ind_row_cont.active:not(.hide, .hidden, .hideVar) .row_checkbox",i).hide();$(".ind_row_cont.active:not(.hide, .hidden, .hideVar) .row_action .update_group",i).hide();$(".ind_row_cont.active:not(.hide, .hidden, .hideVar) .select_action,.select_action_long",i).hide();$(".ind_row_cont.active:not(.hide, .hidden, .hideVar)",i).not(".hide").removeClass("active").addClass("updating")}else{i=$(e).closest(".updateTabs");if($(".item_ind."+r,i).not(".hide").not(".hidden").not(".updating").length<1){if(n==r)$(".ind_row_cont."+r+" .select_action",i).hide();else $(".select_"+r,i).hide();if(n!=undefined&&$(".item_ind."+n,i).not(".hide").not(".hidden").not(".updating").length<1){$(".ind_row_cont."+n+" .row_checkbox",i).hide();$(".ind_row_cont."+n,i).removeClass("active");$(".status_"+n,i).text("Update All").hide()}}if(n!=undefined&&n!=r)checkGeneralSelect(n,i);checkGeneralSelect(r,i);checkGeneralSelect("ind_row_cont",i)}}function showHidden(){var e="#"+currentUpdatePage;$.each(updateCheckArray,function(t,n){var r=$(".item_ind."+t,e).not(".hide").not(".updating").length;if(r>0){$(".row_"+t).show();if(!$(".row_"+t,e).closest(".ind_row_cont").is(":visible"))$(".row_"+t,e).closest(".ind_row_cont'").show()}})}function checkGeneralSelect(e,t,n){var r,i,s,o;if(n==undefined)n=0;if(t==undefined||t=="")t="#"+currentUpdatePage;if(n==1){r=$(".item_ind."+e).not(".hide").not(".hidden").not(".updating").length;i=$(".item_ind.active."+e).not(".hide").not(".hidden").not(".updating").length}else{if(e!="ind_row_cont"){r=$(".item_ind."+e,t).not(".hide").not(".hidden").not(".updating").length;i=$(".item_ind.active."+e,t).not(".hide").not(".hidden").not(".updating").length}else{r=$("."+e,t).not(".hide").not(".hidden").not(".updating").length;i=$(".active."+e,t).not(".hide").not(".hidden").not(".updating").length}}if(r==0){if(n==1){$(".row_"+e).addClass("hideVar");if(viewHiddenFlag==0)$(".row_"+e).hide();s=$(".row_"+e);o=$(".row_"+e).closest(".ind_row_cont");if($(".item_ind",s).not(".updating").not(".hidden").not(".hide").length<2)$(".select_"+e).slideUp();if($(".item_ind",o).not(".updating").not(".hidden").not(".hide").length<1){if(viewHiddenFlag==0)$(".row_"+e).closest(".ind_row_cont'").hide();$(".row_"+e).closest(".ind_row_cont'").addClass("hideVar").removeClass("active")}}$(".status_"+e).text("Update All ");if(e=="ind_row_cont")$(".status_"+e).addClass("disabled");else $(".status_"+e).closest(".update_group").hide()}else if(r!=0){if(n==1){$(".row_"+e).removeClass("hideVar");$(".row_"+e).show();s=$(".row_"+e);o=$(".row_"+e).closest(".ind_row_cont");if($(".item_ind",s).not(".updating").not(".hidden").not(".hide").length>1){$(".select_"+e).slideDown()}else{$(".select_"+e).hide()}if($(".item_ind",o).not(".updating").not(".hidden").not(".hide").length>1){$(".row_"+e).closest(".ind_row_cont'").show();$(".row_"+e).closest(".ind_row_cont'").removeClass("hideVar")}}if(r==i){$(".status_"+e).text("Update All ");if(e!="ind_row_cont"){$(".status_"+e).closest(".update_group").show()}else{$(".status_"+e).removeClass("disabled")}}else if(i==0){$(".status_"+e).text("Update All ");if(e!="ind_row_cont"){$(".status_"+e).closest(".update_group").hide()}else $(".status_"+e).addClass("disabled")}else{$(".status_"+e).text("Update Selected ");if(e!="ind_row_cont"){$(".status_"+e).closest(".select_action").show();$(".status_"+e).closest(".update_group").show()}else $(".status_"+e).removeClass("disabled")}}}function generalSelect(e,t,n){var r=0;var i=$(e).closest(".updateTabs");var s=$(e,i).closest(".ind_row_cont");if($(e).hasClass("active")){$(e).not(".hidden").not(".hide").not(".updating").removeClass("active");r=0}else{$(e).not(".hidden").not(".hide").not(".updating").addClass("active");r=1}if(t=="ind_row_cont"){if(r==0){$(".item_ind",e).not(".hide").not(".hidden").not(".updating").removeClass("active")}else $(".item_ind",e).not(".hide").not(".hidden").not(".updating").addClass("active")}else{if($(".item_ind.selectOption.active",s).not(".hide").not(".hidden").not(".updating").length<$(".item_ind.selectOption",s).not(".hide").not(".hidden").not(".updating").length){$(e).closest(".ind_row_cont").removeClass("active")}else if($(".item_ind.selectOption.active",s).not(".hide").not(".hidden").not(".updating").length==$(".item_ind.selectOption",s).not(".hide").not(".hidden").not(".updating").length)$(e).closest(".ind_row_cont").addClass("active")}var o=$(e).attr("parent");var u=$(e).attr("selector");if(o!=undefined)checkGeneralSelect(o,i);checkGeneralSelect(u,i);checkGeneralSelect("ind_row_cont",i)}function selectedGroupSelection(){var e=".siteSelectorContainer",t;$(".group_cont.active",e).each(function(){if($(this).attr("gid")!=undefined&&$(this).attr("gid")!=""){t=group[$(this).attr("gid")].siteIDs;if(t!=undefined&&getPropertyCount(t)>0){$.each(t,function(t,n){$("#s"+n,e).not(".disabled").addClass("active")})}}})}function makeSelection(e,t,n){var r={},i,s;var o=0;var u=$(e).closest(".siteSearch");if($(e).hasClass("deselectGroups"))$(".group_cont",".siteSelectorContainer").removeClass("active");if($(e).hasClass("active")){$(e).removeClass("active");gFlag=1}else{$(e).addClass("active");gFlag=2}if(n==1&&t!=1){var a=$(".ind_groups","#bottomToolBarSelector").length;if(groupEditFlag==0||a==0){$(e).removeClass("active")}var f=0;var l="#bottom_left  .list_cont .content  .active";if($(l,u).length>0){$(l,u).each(function(){r[f]=$(this).attr("sid");o++;f++})}else r[0]="empty";groupChangeArray[currentGroup]=r;$("#save_group_changes").show();$("#g"+currentGroup+"  a  .count_cont").html(o)}if(t==1){if(gAll==1){$(".group_items_cont  #g0",u).removeClass("active");$(".website_items_cont  .website_cont",u).removeClass("active");gAll=0}if(n==1){currentGroup=$(e).attr("gid");removeDeleteConf();if(gFlag==2){$(".ind_groups",u).removeClass("active");$(".ind_sites",u).removeClass("active")}i=$(e).addClass("active")}i=$(e).attr("gid");if(groupEditFlag==1&&groupChangeArray[i]!=undefined){s=groupChangeArray[i]}else{if($(e).attr("newgroup")!=1)s=group[i].siteIDs;else{s=""}}if(s!=undefined&&getPropertyCount(s)>0){$.each(s,function(e,t){if(gFlag==2){$("#s"+t,u).not(".disabled").addClass("active")}else if(gFlag==1&&n!=1)$("#s"+t,u).not(".disabled").removeClass("active")})}selectedGroupSelection()}else if(t=="all"){$(".group_items_cont  .group_cont",u).removeClass("active");if(gFlag==2){$(".website_items_cont .website_cont",u).not(".disabled").addClass("active");$(e).addClass("active");gAll=1}else if(gFlag==1){$(".website_items_cont .website_cont",u).not(".disabled").removeClass("active");gAll=0}}}function mainUpdateSelection(e,t){var n="ind_row_cont";var r="#"+currentUpdatePage;if(e=="all"){$("."+n,r).not(".hide,.hidden,.updating,.hideVar").each(function(){$(this).addClass("active");$(".item_ind",this).not(".hide,.hidden,.updating,.hideVar").addClass("active")})}else if(e=="none"){$("."+n,r).not(".hide,.hidden,.updating,.hideVar").each(function(){$(this).removeClass("active");$(".item_ind",this).not(".hide,.hidden,.updating,.hideVar").removeClass("active")})}else if(e=="invert"){$("."+n,r).not(".hide,.hidden,.updating,.hideVar").each(function(){if($(this).hasClass("active")){$(this).removeClass("active");$(".item_ind",this).not(".hide,.hidden,.updating,.hideVar").removeClass("active")}else{$(this).addClass("active");$(".item_ind",this).not(".hide,.hidden,.updating,.hideVar").addClass("active")}})}checkGeneralSelect(n)}function selection(e,t,n,r){if(r==undefined)t=$("."+t);else{var i=$(n).closest(r);t=$("."+t,i)}if(e=="all"){$(t).not(".hide,.updating,.hidden,.ind_row_cont").addClass("active")}else if(e=="none")$(t).not(".hide,.updating,.hidden,.ind_row_cont").removeClass("active");else if(e=="invert"){$(t).not(".hide,.updating,.hidden,.ind_row_cont").each(function(){if($(this).hasClass("active"))$(this).not(".hide,.updating,.hidden,.ind_row_cont").removeClass("active");else $(this).not(".hide,.updating,.hidden,.ind_row_cont").addClass("active")})}checkGeneralSelect(t);if(n){var s=$(n).attr("parent");if(s)checkGeneralSelect(s)}}function checkSearchedList(e,t,n){if(n==2){if(t=="")var r="#"+currentUpdatePage;else var r=t;if(viewHiddenFlag==1)return $(".ind_row_cont",r).not(".hide").length;else return $(".ind_row_cont",r).not(".hide").not(".hideVar").length}else{return $(e,t).not(".hide").length}}function searchSites(e,t){clearTimeout(i);var n=".searchable";if($(e).val().length>0)$(e).next().show();else $(e).next().hide();if(t==3)var r=".favSearch";else if(t==2){var r=$("#"+currentUpdatePage)}else var r=$(e).closest(".siteSearch");var i=setTimeout(function(){if($(e).val().length>2&&$(e).val()!="type to filter"){if(t==2||t==4){$(n,r).closest(".ind_row_cont").not(".groupHide").removeClass("hide");$(n+":not(:contains("+$(e).val()+"))",r).closest(".ind_row_cont").not(".groupHide").addClass("hide");checkGeneralSelect("ind_row_cont");if(t==2)checkSearchListVar=checkSearchedList(n,"",2);else checkSearchListVar=checkSearchedList(n,r,2);if(checkSearchListVar<1)$(".hiddenCont",r).show();else $(".hiddenCont",r).hide()}else{$(n,r).not(".groupHide").removeClass("hide");$(n+":not(:contains("+$(e).val()+"))",r).not(".groupHide").addClass("hide");if(checkSearchedList(n,r)<1)$(".hiddenCont",r).show();else $(".hiddenCont",r).hide()}}else{$(".hiddenCont",r).hide();if(t==2||t==4){$(n,r).closest(".ind_row_cont").not(".groupHide").removeClass("hide");checkGeneralSelect("ind_row_cont")}else{$(n,r).not(".groupHide").removeClass("hide")}}},300)}function validateForm(e){var t=0;var n={};$("#"+e+" .formVal").removeClass("error").each(function(){if($(this).attr("type")=="hidden"||$(this).is(":visible")){if($(this).hasClass("dropdown"))n[$(this).attr("id")]=$(this).attr("dropopt");else n[$(this).attr("id")]=$(this).val();if($(this).hasClass("required")&&$(this).val()==""){$(this).addClass("error");t=1}}});$("#"+e+" .checkbox.active").each(function(){n[$(this).attr("id")]=1});if(t==1)n=false;if(e=="dropboxRepo"){n["consumer_key"]=dpConsumerKey;n["consumer_secret"]=dpConsumerSecret}return n}function processTestConnection(e,t,n){e=e.data.repositoryTestConnection;if(e.status=="success"){$("#"+n).removeClass("testing").addClass("success")}else{$("#"+n).removeClass("testing").addClass("error");$("#"+t+" .inner_cont").append('<div class="conn_test_error_cont profileStatusDiv"><div class="e_close"></div>'+e.errorMsg+'<div class="conn_test_error_cont_arrow"></div></div>')}}function installIWPAddons(e,t){if(t==1)var n="UPDATE";else var n="INSTALL";var r='<div class="dialog_cont" style="width:750px;"> <div class="th rep_sprite"> <div class="title droid700">'+n+' ADDONS</div></div><iframe src="update.php?action='+e+'" height="500px" width="750px" id="infiniteWP"></iframe></div>';$("#modalDiv").dialog("destroy");$("#modalDiv").html(r).dialog({width:"auto",modal:true,position:"center",resizable:false,open:function(e,t){bottomToolBarHide()},close:function(e,t){bottomToolBarShow()}})}function checkIWPAddons(e){if(e==undefined){var t={};t["requiredData"]={};t["requiredData"]["forceCheckUpdate"]=1;doCall(ajaxCallPath,t,"checkIWPAddons","json")}else{loadAddonsPage()}}function processIWPLogin(e){$(".loginIWP").removeClass("disabled");$(".btn_loadingDiv").remove();request=e.data.IWPAuthUser;if(request.error==1){if(request.passwordAuth==1){$(".dialog_cont .loginError").html("<div class='error'>Invalid Username or Password. Kindly try again.</div>")}else{$(".dialog_cont .dialog_content").html(request.message).addClass("warn_conn_break_iframe");$(".bottom_bar").remove()}}else if(request.success==1){usernameTemp="";passwordTemp="";$("#modalDiv").dialog("close");var t=request.action;if(t=="installAddons")installIWPAddons("installAddons&downloadToken="+request.token);else if(t=="register")checkIWPAddons()}}function processAddonActivation(e){var t=unescape(window.location.pathname)+"?page=addons";window.location.href=t}function objLen(e){var t=0;$.each(e,function(e,n){$.each(n,function(e,n){t++})});if(e==0)return 0;else return t}function maxLen(e){if(e>100)return"100+";else return e}var totalWindowHeight="";var totalWindowWidth="";var bottomFullBar=0;var reloadStatsControl=1;var dpConsumerKey="";var dpConsumerSecret="";var scheduleAddonFlag="";var repositoryAddonFlag="";var installCloneAddonFlag="";var forceBackup=0;var manage={};var activeItem="plugins";var g1="w1,w2,w3,w4";var timeOut="";var selectedGroup={};var groupEditFlag=0;var incrementRand=0;var siteSelectorVar="";var bottomToolbarVar="";var currentPage="";var ajaxCallPath="ajax.php";var groupCounter=0;var groupCreateArray={};var groupChangeArray={};var groupNameArray={};var groupDeleteArray={};var usernameTemp,passwordTemp;var currentPage="updates";var state;var currentUpdatePage;var parentFlag=0;var updateCheckArray={};var viewHiddenFlag=0;var toobarAddsite="";var toobarHiddenUpdates="";var historyRefreshCheckFlag=0;var stopAllAction=false;var notNowUpdate=false;var clientUpdateSites=false;var updateAvailable;var siteSelectorRestrictVar;var formArrayVar={};var runOffBrowser=0;var clientPluginBrandingSettings;var tempConfirmObject;var recentLength=0;var historyRefreshInterval,historyRefreshIntervalFlag=0;Date.prototype.addDays=function(e){this.setDate(this.getDate()+e);return this};String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.toTitleCase=function(){var e=/^(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|vs?\.?|via)$/i;return this.replace(/([^\W_]+[^\s-]*) */g,function(t,n,r,i){if(r>0&&r+n.length!==i.length&&n.search(e)>-1&&i.charAt(r-2)!==":"&&i.charAt(r-1).search(/[^\s-]/)<0){return t.toLowerCase()}if(n.substr(1).search(/[A-Z]|\../)>-1){return t}return t.charAt(0).toUpperCase()+t.substr(1)})};jQuery.expr[":"].contains=function(e,t,n){return jQuery(e).text().toUpperCase().indexOf(n[3].toUpperCase())>=0};var gFlag=0;var gAll=0;var currentGroup=0